!function(){function a(a){this.storage=a,this.subData={},this.suffix="";try{this.storage.setItem(f.prefix+f.ENABLE_FLAG,1),this.available=!0}catch(b){this.available=!1}}"undefined"==typeof document||"classList"in document.createElement("a")||!function(a){"use strict";if("HTMLElement"in a||"Element"in a){var b="classList",c="prototype",d=(a.HTMLElement||a.Element)[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.className),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.className=this.toString()}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(){var a,b=arguments,c=0,d=b.length,e=!1;do a=b[c]+"",-1===i(this,a)&&(this.push(a),e=!0);while(++c<d);e&&this._updateClassName()},k.remove=function(){var a,b=arguments,c=0,d=b.length,e=!1;do{a=b[c]+"";var f=i(this,a);-1!==f&&(this.splice(f,1),e=!0)}while(++c<d);e&&this._updateClassName()},k.toggle=function(a,b){a+="";var c=this.contains(a),d=c?b!==!0&&"remove":b!==!1&&"add";return d&&this[d](a),c},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}}(self);var b={};b._user_agent=window.navigator.userAgent.toLowerCase(),b.ios=function(){return b.iphone()||b.ipod()||b.ipad()},b.iphone=function(){return b._find("iphone")},b.ipod=function(){return b._find("ipod")},b.ipad=function(){return b._find("ipad")},b.android=function(){return b._find("android")},b.androidPhone=function(){return b.android()&&b._find("mobile")},b.androidTablet=function(){return b.android()&&!b._find("mobile")},b.androidIcs=function(){return RegExp("Android 4.").test(navigator.userAgent)},b.mobile=function(){return b.androidPhone()||b.iphone()||b.ipod()},b.tablet=function(){return b.ipad()||b.androidTablet()},b.desktop=function(){return!b.tablet()&&!b.mobile()},b.webview=function(){var a=document.cookie.split(/;\s*/).reduce(function(a,b){var c=b.split(/=/);return a[c[0]]=c[1],a},{});return a.URLScheme?!0:!1},b.sdk=function(){var a=document.cookie.match(/(ios|android)SDKVersion=(.+?);/);return a?{device:a[1],version:a[2]}:null},b.isModernChrome=function(){var a=b._user_agent.toLowerCase();if(a.match(/android/i)){var c=a.match(/chrome\/([0-9]*)[.0-9]* ( Mobile)?/),d=1,e=25;return c&&c.length>=2&&c[d]>=e}},b._find=function(a){return-1!==b._user_agent.indexOf(a)};var c={};c.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},c.isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)},c.isUndefined=function(a){return"undefined"==typeof a},c.isFunction=function(a){return a&&"function"==typeof a},c.copy=function(a){return c.isObject(a)?JSON.parse(JSON.stringify(a)):null},c.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)},c.startsWith=function(a,b){return 0===a.indexOf(b)},c.isEmpty=function(a){return c.isString(a)&&(a=a.trim()),null===a||""===a||c.isUndefined(a)||a.hasOwnProperty("length")&&0===a.length||c.isObject(a)&&0===Object.keys(a).length},c.appendSuffix=function(a,b){return b?a+"_"+b:a},c.match=function(a,b){if(a&&c.isArray(a)){var d,e;for(d=0;d<a.length;d++)if(e=a[d],new RegExp(e).test(b))return!0}return!1},c.isNumber=function(a){return"number"!=typeof a&&"string"!=typeof a?!1:a==parseFloat(a)&&isFinite(a)},c.setLocationHref=function(a,b,d){c.enabledDEBUG&&c.debug({type:"[important]",command:"Common.setLocationHref",href:a}),d=d||document,b?d.location.replace(a):d.location.href=a},c.getTime=Date.now||function(){return(new Date).getTime()},c._requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)},c.requestAnimationFrame=function(a){c._requestAnimationFrame.call(window,a)},c.createClickOnceHandler=function(a){return function(a){var b=!1,d={listener:function(e){b?c.isUndefined(e)?event.returnValue=!1:e.preventDefault():(b=!0,a(e,d))},reset:function(){b=!1},isExecuting:function(){return b}};return d}(a)},c.getUrlSeparator=function(a){return a.indexOf("?")>-1?"&":"?"},c.convertUrlParams=function(a,b){c.isUndefined(b)&&(b=!0);var d=[];for(var e in a)d.push(e+"="+encodeURIComponent(a[e]));return b&&d.push(".r="+parseInt(1e4*Math.random())),d.join("&")},c.appendUrlParmas=function(a,b,d){var e=c.getUrlSeparator(a),f=c.convertUrlParams(b,d);return a+e+f},c.htmlentities=function(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},c.extend=function(a,b){for(var c in b)a[c]=b[c]},c.Queue=function(a,b){var d=[],e=5,f=5e3,g=function(){for(var a=c.getTime(),b=0;b<d.length;b++)d[b].time+f<a&&(d.splice(b,1),b--)};return a&&(f=a),b&&(e=b),{clear:function(){d=[]},length:function(){return d.length},enqueue:function(a){g(),d.length<e&&d.push({time:c.getTime(),data:a})},dequeue:function(){return g(),d.length>0?d.shift().data:null}}},c.createExecuteOnceHandler=function(a){return function(a){var b=!1,c={execute:function(c,d){b||(b=!0,d=d||{},a(c,d))},reset:function(){b=!1},isExecuting:function(){return b}};return c}(a)},c.contains=function(a,b){return a.indexOf(b)>=0},c.loop=function(a,b){"use strict";if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!=typeof b)throw new TypeError;for(var e=arguments.length>=3?arguments[2]:void 0,f=0;d>f;f++)if(f in c&&!1===b.call(e,c[f],f,c))return!1;return!0},c.debugType="console",window.changeGreeDebugType=function(a){c.enabledDEBUG=!0,c.enabledWARN=!0,c.enabledERROR=!0,c.debugType=a},c.enabledDEBUG=!1,c.enabledWARN=!0,c.enabledERROR=!0,c._log=function(a,b,d){if(c.isFunction(b)&&(b=b()),b=c.isObject(b)?JSON.stringify({type:a,msg:b}):"["+a+"]"+b,"alert"==c.debugType)alert(b);else{if(d){var e=new Error("Trace:");e.stack&&(b+="\n"+e.stack.replace("Error:",""))}console[a](b+"\n")}},c.debug=function(a,b){c.enabledDEBUG&&c._log("log",a,0!=b)},c.warn=function(a){c.enabledWARN&&c._log("warn",a)},c.error=function(a){c.enabledERROR&&c._log("error",a)};var d=function(a){this.name="GreeError",this.message=a,c.error(a)};d.prototype=new Error,d.prototype.constructor=d;var e=function(){function a(a){return 10>a?"0"+a:a}function b(a){var d,e,f,g,h,i=/["\\\x00-\x1f\x7f-\x9f]/g;switch(typeof a){case"string":return i.test(a)?'"'+a.replace(i,function(a){var b=c[a];return b?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})+'"':'"'+a+'"';case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"undefined":return String(null);case"object":if(!a)return"null";if(d=[],"number"==typeof a.length&&!a.propertyIsEnumerable("length")){for(g=a.length,e=0;g>e;e+=1)d.push(b(a[e])||"null");return"["+d.join(",")+"]"}for(f in a)f.match("___$")||a.hasOwnProperty(f)&&"string"==typeof f&&(h=b(a[f]),h&&d.push(b(f)+":"+h));return"{"+d.join(",")+"}"}return"undefined"}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",a(this.getUTCMonth()+1),"-",a(this.getUTCDate()),"T",a(this.getUTCHours()),":",a(this.getUTCMinutes()),":",a(this.getUTCSeconds()),"Z"].join("")};var c={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return{stringify:b,parse:function(a){if(!a)return a;if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))try{return JSON.parse(a)}catch(b){return!1}return!1}}}(),f={prefix:"_greepf.",ENABLE_FLAG:"enable",APP:{CONFIG:"config",ANALYTICS:"analytics",HEARTBEAT_TIME:"heartbreat_time",THUMBNAIL:"thumb"},API:{CACHE:"api.cache"}};a.prototype.isAvailable=function(){return this.available},a.prototype.setSuffix=function(a){this.suffix=a},a.prototype.convertKey=function(a){return f.prefix+a+this.suffix},a.prototype.get=function(a,b){if(b||(a=this.convertKey(a)),!a)return null;if(this.subData[a])return this.subData[a];var c=this.storage.getItem(a);return c&&c.length>102400?(this.storage.removeItem(a),null):this.available?e.parse(c):null},a.prototype.set=function(a,b,c){return c||(a=this.convertKey(a)),this.available&&this.storage.setItem(a,e.stringify(b)),this.subData[a]=b,!0},a.prototype.remove=function(a,b){b||(a=this.convertKey(a)),this.available&&this.storage.removeItem(a),delete this.subData[a]},a.prototype.clear=function(){this.available&&this.storage.clear(),this.subData={}};var g,h;try{g=new a(localStorage)}catch(i){g=new a(sessionStorage)}h=new a(sessionStorage);var j={regex:{numeric:/^[0-9]+$/,notHtml:/^(?!.*<[^>]*>)/},required:function(a){return!c.isEmpty(a)},numeric:function(a){return j.regex.numeric.test(a)},array:function(a){return c.isArray(a)},object:function(a){return c.isObject(a)},string:function(a){return c.isString(a)},notHtml:function(a){return j.regex.notHtml.test(a)}},k={getItem:function(a){return a&&this.hasItem(a)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},setItem:function(a,b,c,d,e,f){if(a&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(a)){var g="";if(c)switch(c.constructor){case Number:g=c===1/0?"; expires=Tue, 19 Jan 2038 03:14:07 GMT":"; max-age="+c;break;case String:g="; expires="+c;break;case Date:g="; expires="+c.toGMTString()}document.cookie=escape(a)+"="+escape(b)+g+(e?"; domain="+e:"")+(d?"; path="+d:"")+(f?"; secure":"")}},removeItem:function(a,b){a&&this.hasItem(a)&&(document.cookie=escape(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(b?"; path="+b:""))},hasItem:function(a){return new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=0;b<a.length;b++)a[b]=unescape(a[b]);return a}},l={};l.constant={app_type:{PC:"pc",SMARTPHONE:"sp"},ready_state:{UNINITIALIZED:0,LOADING:1,LOADED:2,COMPLETE:3},start_type:{LOAD:"load",DOM_CONTENT_LOADED:"DOMContentLoaded",IMMEDIATELY:"immediately"},page_load_type:{MANUAL:"manual",HASHCHANGE:"hashchange"},COMMON_DIALOG_HEIGHT:44,FINGERPRINT:"1465181556872"},l.config={env:"",app_type:null,domain:"pf.gree.net",aimg_domain:"aimg-pf.gree.net",app_id:null,app_name:null,user_id:null,user_name:null,app_container_id:"gree-app-container",gree_container_id:"gree-pf-container",page_load_type:l.constant.page_load_type.MANUAL,start_type:l.constant.start_type.LOAD,enable_footer:!0,use_iframe:0,is_webview:void 0,app_top_url:null,session_utime:null,friends_count:null,develop_domain_list:[/^pf-dev-[a-z0-9_\-\.]+\.dev\.gree-dev\.net/,/^mpf-dev-[a-z0-9_\-\.]+\.dev\.gree\.jp/,"mpf-stg7.gree.jp","pf-stg7.gree.net","ppf-stg7.gree.net","pf-stg1-qa-pf.gree.jp","pf-stg1-qa-pf.gree.net"],css_dynamically_load:!0,js_ver:"current"},l.state={current_app_url:null,ready:l.constant.ready_state.UNINITIALIZED},l.module_config=null,l.modules={},l.init=function(){var a=document.location.hostname;for(var b in l.config.develop_domain_list)if(a.match(l.config.develop_domain_list[b])){c.enabledDEBUG=!0;break}}(),l.setAppConfig=function(a){Object.keys(a).forEach(function(b){c.isString(b)&&!c.isUndefined(a[b])&&("domain"===b&&l.config[b]!=a[b]?(l.config[b]=a[b],l._setDevelopEnv(a)):l.config[b]=a[b],"msg"===b&&l.dispatchEvent("message_loaded"))})},l._setDevelopEnv=function(a){l.config.env="dev",l.config.aimg_domain=a.js_hostname||a.domain},l._addStorageConfigData=function(){var a=g.get(f.APP.CONFIG);a&&l.setAppConfig(a)},l.updateStorageConfigData=function(a){var b=g.get(f.APP.CONFIG);b||(b={}),Object.keys(a).forEach(function(c){b[c]=a[c]}),g.set(f.APP.CONFIG,b),l.setAppConfig(a)},l.setMoudleConfig=function(a){l.module_config=a},l.addModule=function(a,b){l.modules[a]=b},l.getModule=function(a){return l.modules[a]},l._hasInitFunction=function(a){return a&&c.isFunction(a.init)},l._initModules=function(){Object.keys(l.modules).forEach(function(a){if(l._hasInitFunction(l.modules[a])){var b=l.module_config[a]||{};l.modules[a].init.call(l.modules[a],b)}})},l._start=function(a){l._initModules(),c.isFunction(a)&&a(),l.changeReadyState(l.constant.ready_state.LOADED),l.dispatchEvent("app_started")},l.start=function(a){if(l.changeReadyState(l.constant.ready_state.LOADING),l._addStorageConfigData(),l.constant.start_type.IMMEDIATELY!==l.config.start_type&&l.config.start_type){var c=!1;window.addEventListener(l.constant.start_type.DOM_CONTENT_LOADED,function d(){window.removeEventListener(l.constant.start_type.DOM_CONTENT_LOADED,d,!1);var e=!1,f=!1,g=l.getModule("replace_tag");g&&g.init&&(g.init(l.module_config.replace_tag),g.init=null,e=g.searchTag());var h=l.getModule("replace_tag_ics");h&&h.init&&l.config.use_iframe&&b.androidIcs()&&(h.init(l.module_config.replace_tag_ics),h.init=null,f=h.searchTag()),c=e||f,c&&l._start(a)}),window.addEventListener(l.config.start_type,function e(){window.removeEventListener(l.config.start_type,e,!1),c||l._start(a)},!1)}else l._start(a)},l.delay={},l.delay.queue=new c.Queue,l.delay.execute=function(){for(var a;a=l.delay.queue.dequeue();)a.func.apply(null,a.args);l.delay.queue.clear()},l.delay.command=function(a){return function(){return l.state.ready!=l.constant.ready_state.COMPLETE?void l.delay.queue.enqueue({func:a,args:arguments}):void a.apply(null,arguments)}},l.changeReadyState=function(a){l.state.ready!=l.constant.ready_state.COMPLETE&&(l.state.ready=a)},l.appendFingerprint=function(a){if(!a)return a;var b=c.getUrlSeparator(a);return a+b+l.constant.FINGERPRINT},l.getHttpRoot=function(){return l.config.domain?"http://"+l.config.domain+"/":null},l.getHttpAimgUrl=function(a){if(l.config.aimg_domain){var b="http://"+l.config.aimg_domain+"/"+a;return l.appendFingerprint(b)}return null},l.getGreeAppTopUrl=function(){return l.getHttpRoot()+l.config.app_id},l.getAppTopUrl=function(){return l.config.app_top_url?l.config.app_top_url:l.getHttpRoot()+l.config.app_id},l.getCurrentAppPageUrl=function(){return l.state.current_app_url?l.state.current_app_url:null},l.setCurrentAppPageUrl=function(a){a&&(l.state.current_app_url=a)},l.dispatchEvent=function(a){var b=l.getModule("event_manager");if(b&&c.isFunction(b.dispatchEvent)){var d=Array.prototype.slice.call(arguments);b.dispatchEvent.apply(null,d)}},l.getAppContainer=function(){var a=$("#"+l.config.app_container_id);if(!a.isNotEmpty()){var b=$("#gree‒app‒container");if(b.isNotEmpty())return l.config.app_container_id="gree‒app‒container",b}return a},function(){var a={};a.executeMultiple=function(b,c,d,e){var f=0,g=0,h=[];d.forEach(function(d){f+=1,a.execute(b,c,d,function(b){if(g+=1,a.isFailedGetData(b)||h.push(b),g===f){0===h.length?500:200;e({summary:{try_count:f,success_count:h.length},data:h})}})})},a.execute=function(b,e,f,g,h){var i=a.validate(b,e,f,g);if(i.length>0)throw new d("ajax args error. detail:"+i.join(","));f.action=e;var j=null;h?(j="POST",f.action&&(b=c.appendUrlParmas(b,{ac:f.action}))):(j="GET",b=c.appendUrlParmas(b,f)),a.send(j,b,f,g)},a.send=function(b,d,e,f){var g=new XMLHttpRequest;g.open(b,d,!0),g.onreadystatechange=function(){if(g.DONE==g.readyState){var b=null;if(200==g.status){var c=g.responseText;try{b=JSON.parse(c),b.status=a.getCommonResponseStatus(200,null)}catch(d){b={},b.status=a.getCommonResponseStatus(500,"server api error.")}}else{b={};var e="api error";g.responseText&&(e=g.responseText),0==g.status&&(e="unknown"),b.status=a.getCommonResponseStatus(g.status,e)}b.header=a.getCommonResponseHeader(g),f(b)}},g.withCredentials=!0,"POST"===b?(g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.debug({command:"[important]Ajax Secure",url:d,params:e}),g.send(c.convertUrlParams(e))):g.send()},a.getCommonResponseHeader=function(a){var b=null;return a.getResponseHeader("date")&&(b=new Date(a.getResponseHeader("date")).getTime()),{res_time:b}},a.getCommonResponseStatus=function(a,b){return{code:a,message:b}},a.validate=function(a,b,d,e){var f=[],g=j.required(a);g||f.push("[url:"+a+"]");var h=j.required(b)&&j.string(b);h||f.push("[act:"+b+"]");var i=c.isEmpty(d)||j.object(d);i||f.push("[params:"+d+"]");var k=c.isFunction(e);return k||f.push("[callback:"+e+"]"),f},a.isFailedGetData=function(a){return!c.isObject(a)||200!==a.status.code},l.addModule("ajax",a)}(),function(){var a={};a.config={id:null,target_ids:[]},a.target_win=null,a.services={},a.callback={id:0,map:{}},a.util={},a.util.getAargements=function(){return Array.prototype.slice.apply(arguments[0])},a.register=function(b,c){a.services[b]=c},a.register("callback",function(b,c){var d=a.callback.map[b];d&&(delete a.callback.map[b],d(c))}),a.init=function(b){a.callback.id=0,a.callback.map={},a.config.id=b.id||"gree_client",a.config.target_ids=b.target_ids||["gree_parent"],b.register&&Object.keys(b.register).forEach(function(c){a.register(c,b.register[c])}),window.addEventListener("message",a.onMessage,!1)},a.start=function(){a.target_win=window.parent,a.call("rpc_start",null,{status:"ok",is_webview:b.webview(),sdk:b.sdk()})},a.postMessage=function(b,c){a.target_win.postMessage(b,c)},a.onMessage=function(b){if(c.isString(b.data)){var d=e.parse(b.data);d&&c.isString(d.s)&&c.isString(d.f)&&c.isArray(d.a)&&a._isAllowTargetId(d.f)&&d.t===a.config.id&&a.services[d.s]&&a.services[d.s].apply(null,a.util.getAargements(d.a))}},a.call=function(b,c,d){var e=null;c&&(e=a.callback.id=a.callback.id+1,a.callback.map[e]=c),a._call(b,c,e,d)},a.callCallback=function(b,c){b&&a._call("callback",null,b,c)},a._call=function(b,c,d){var f={s:b,f:a.config.id,t:"all",a:Array.prototype.slice.call(arguments,2)};a.postMessage(e.stringify(f),"*")},a._isAllowTargetId=function(b){return c.contains(a.config.target_ids,b)},l.addModule("rpc",a)}();var m=m||{};m.rpc={ios_3rd_party_cookie_error:"ブラウザのCookieが無効なため、以下の手順でCookieを有効にしてブラウザを更新してください。\n設定>Safari>Cookieをブロック>「常に許可」または「訪問したWebサイトを許可」",android_3rd_party_cookie_error:"このブラウザは非対応のためアプリが正しく動作しない場合があります。最新版のChromeアプリからアクセスをお試しください。"},function(){var a={};a.init=function(a){function b(a,b){if(!c.match(l.config.allow_actions,b.act))throw new d("[GREE] Forbidden! action="+action);var e=function(b){l.getModule("rpc").callCallback(a,b)};b.params_list?l.getModule("ajax").executeMultiple(b.url,b.act,b.params_list,e):l.getModule("ajax").execute(b.url,b.act,b.params,e,b.do_post)}function e(a,b){var c=k.getItem("gssid_hash"),d=k.getItem("gssid_hash_pf");l.getModule("rpc").callCallback(a,{session_changed:c&&d&&c!==d?!0:!1})}l.setAppConfig({msg:m,start_type:l.constant.start_type.IMMEDIATELY,allow_actions:a.allow_actions});var f=document.cookie?!0:!1;return f?(l.setMoudleConfig({rpc:{id:"gree_rpc",target_ids:["gree_parent","gree_chat"],register:{"Ajax.executeMultiple":b,"Ajax.execute":b,session_check:e}}}),void l.start(function(){l.getModule("rpc").start()})):void(parent.location.href="/?action=error_unsupported_browser")},window.GREE=a}()}();